# Anima ğŸ¤–

å…·å‚™æŒä¹…è¨˜æ†¶ã€äººæ ¼ä¸€è‡´æ€§èˆ‡èº«ä»½è­˜åˆ¥çš„ç¤¾ç¾¤ AI Agentï¼Œæ”¯æ´ Threads/MCP æœ¬åœ°å°è©±èˆ‡æ¨¡æ“¬è§€å¯Ÿæ¨¡å¼ã€‚

## ç‰¹è‰²

- **æŒä¹…è¨˜æ†¶**ï¼šMem0 ä¸‰å±¤è¨˜æ†¶ï¼ˆæƒ…ç¯€/èªç¾©/åæ€ï¼‰ï¼Œä¸¦åˆ†é›¢ agent/user scopeï¼Œç¢ºä¿å°è©±è€…èˆ‡å°å…‰çš„å…§å®¹ä¸æ··æ·†
- **äººæ ¼ä¸€è‡´æ€§**ï¼šå€Ÿé¡ TinyTroupe çš„ persona schemaï¼Œç”¢ç”Ÿ/æ ¡é©—å›è¦†
- **åæ€æ©Ÿåˆ¶**ï¼šå€Ÿé¡ Generative Agentsï¼Œå®šæœŸç”Ÿæˆé«˜å±¤æ¬¡æ´è¦‹
- **èº«ä»½è­˜åˆ¥**ï¼šMCP æ¨¡å¼å¯ã€Œæˆ‘æ˜¯/æˆ‘å«ã€æˆ– `anima_set_user` æŒ‡å®šèº«ä»½ï¼Œè¨˜æ†¶æœƒæ¨™è¨˜ participant_xxx
- **å¹³å°ç„¡é—œ**ï¼šCLI/daemon/MCP æ¨¡å¼ä¸¦è¡Œï¼Œæ˜“æ–¼æ¥åˆ°å…¶ä»–å¹³å°
- **å¯è‡ªè¨‚äººæ ¼**ï¼šé€é JSON å®šç¾©è§’è‰²ï¼Œéš¨æ™‚åˆ‡æ›

## æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Anima Agent                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Scheduler  â”‚â”€â”€â”€â”‚   Brain     â”‚â”€â”€â”€â”‚  Platform   â”‚           â”‚
â”‚  â”‚  (Cron)     â”‚   â”‚  (æ±ºç­–å¼•æ“) â”‚   â”‚  Adapter    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚         â–¼                 â–¼                 â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   Persona   â”‚   â”‚   Memory    â”‚   â”‚  Reflection â”‚           â”‚
â”‚  â”‚   Engine    â”‚   â”‚   (Mem0)    â”‚   â”‚   Engine    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´

```bash
# ä½¿ç”¨ pip
pip install -e .

# æˆ–ä½¿ç”¨ poetry
poetry install
```

### 2. è¨­å®šç’°å¢ƒè®Šæ•¸

å¿…å¡«ï¼ˆå¯ç”¨ `.env`ï¼‰ï¼š
- `OPENAI_API_KEY`
- `THREADS_ACCESS_TOKEN` / `THREADS_USER_ID`ï¼ˆä½¿ç”¨ Threads æ™‚ï¼‰
- `PERSONA_FILE`ï¼ˆé è¨­ `personas/default.json`ï¼‰
- `QDRANT_URL` / `QDRANT_API_KEY`ï¼ˆé›²ç«¯ Qdrantï¼‰æˆ–æœ¬åœ° `http://localhost:6333`

### 3. å•Ÿå‹•æœ¬åœ°æœå‹™ï¼ˆé–‹ç™¼ç”¨ï¼Œå¯é¸ï¼‰

```bash
docker-compose up -d qdrant postgres
```

### 4. é‹è¡Œ CLI/Daemon

```bash
# åŸ·è¡Œä¸€æ¬¡äº’å‹•å¾ªç’°
anima cycle

# ç™¼ä¸€å‰‡è²¼æ–‡
anima post --topic "AI"

# ç”¢ç”Ÿåæ€
anima reflect

# æŸ¥çœ‹çµ±è¨ˆ
anima stats

# ä»¥ daemon æ¨¡å¼é‹è¡Œï¼ˆå®šæ™‚åŸ·è¡Œï¼‰
anima daemon

# è§€å¯Ÿæ¨¡å¼ï¼ˆæ¨¡æ“¬ä½†ä¸ç™¼æ–‡ï¼‰
anima observe --cycles 3

# è§€å¯Ÿæ¨¡å¼ + Mockï¼ˆæ¸¬è©¦é–‹ç™¼ç”¨ï¼Œä¸éœ€è¦çœŸå¯¦ APIï¼‰
anima observe --mock --cycles 3

# æ¨™è¨»èˆ‡åˆ†æ
anima review             # äº’å‹•å¼æ¨™è¨»
anima review --stats     # æŸ¥çœ‹çµ±è¨ˆ
anima analyze            # ç”¢ç”Ÿåˆ†æå ±å‘Š

# ä¸€é å ±è¡¨
anima report                              # å¾è§€å¯Ÿæ¨¡å¼è³‡æ–™ç”¢ç”Ÿ
anima report --source data/real_logs      # å¾çœŸå¯¦é‹è¡Œè³‡æ–™ç”¢ç”Ÿ
anima report --html                       # åŒæ™‚ç”¢ç”Ÿ HTML
anima report --days 14                    # æŒ‡å®šæ™‚é–“ç¯„åœ
```

### 5. MCPï¼ˆClaude Desktop ç­‰ï¼‰

1. å»ºç«‹ `mcp-config.json`ï¼Œå¥—ç”¨å°ˆæ¡ˆçµ•å°è·¯å¾‘ï¼ˆAPI key ç­‰å¾å°ˆæ¡ˆ `.env` è®€å–ï¼Œä¸ç”¨åœ¨é€™è£¡å¡ï¼‰ï¼š
   ```json
   {
     "mcpServers": {
       "anima": {
         "command": "/path/to/anima/.venv/bin/python",
         "args": ["-m", "src.mcp"],
         "env": {
           "PYTHONPATH": "/path/to/anima"
         }
       }
     }
   }
   ```
2. åœ¨ MCP å®¢æˆ¶ç«¯è¼‰å…¥ã€‚å°è©±æ™‚å¯èªªã€Œæˆ‘æ˜¯ Alexã€æˆ–å‘¼å« `anima_set_user("Alex")` è®“è¨˜æ†¶æ¨™è¨˜ç‚º `participant_Alex`ã€‚

**å¯ç”¨ MCP å·¥å…·ï¼š**

| å·¥å…· | èªªæ˜ |
|------|------|
| `anima_chat` | èˆ‡ Anima å°è©±ï¼ˆè‡ªå‹•è­˜åˆ¥èº«ä»½ã€è¨˜éŒ„è¨˜æ†¶ï¼‰ |
| `anima_set_user` | è¨­å®šç•¶å‰å°è©±è€…çš„åå­— |
| `anima_search_memory` | æœå°‹ Anima çš„è¨˜æ†¶ |
| `anima_add_memory` | æ–°å¢ä¸€å‰‡è¨˜æ†¶ |
| `anima_get_recent_memories` | å–å¾—æœ€è¿‘çš„è¨˜æ†¶ |
| `anima_reflect` | è®“ Anima é€²è¡Œåæ€ |
| `anima_get_persona` | å–å¾—äººæ ¼è³‡è¨Š |
| `anima_memory_stats` | å–å¾—è¨˜æ†¶çµ±è¨ˆ |

## Threads API èªªæ˜

### æ¬Šé™éœ€æ±‚

| æ¬Šé™ | ç”¨é€” | éœ€è¦å¯©æ ¸ |
|-----|------|---------|
| `threads_basic` | åŸºæœ¬è®€å–/ç™¼æ–‡ | å¦ |
| `threads_keyword_search` | æœå°‹å…¬é–‹è²¼æ–‡ | **æ˜¯ï¼ˆéœ€ Meta å¯©æ ¸ï¼‰** |

### äº’å‹•æ¨¡å¼

Anima æ”¯æ´å…©ç¨®äº’å‹•æ¨¡å¼ï¼š

1. **å›è¦†æ¨¡å¼ï¼ˆReply Modeï¼‰** - é è¨­
   - ä½¿ç”¨ `get_replies_to_my_posts()` ç²å–è‡ªå·±è²¼æ–‡çš„å›è¦†
   - ä¸éœ€è¦ç‰¹æ®Šæ¬Šé™
   - é©åˆå¤§å¤šæ•¸ä½¿ç”¨å ´æ™¯

2. **æœå°‹æ¨¡å¼ï¼ˆSearch Modeï¼‰** - å‚™ç”¨
   - ä½¿ç”¨ `search_posts()` æœå°‹å…¬é–‹è²¼æ–‡
   - **éœ€è¦ `threads_keyword_search` æ¬Šé™**ï¼ˆé€šå¸¸éœ€è¦ 1-2 é€±å¯©æ ¸ï¼‰
   - ç•¶å›è¦†æ¨¡å¼æ²’æœ‰å…§å®¹æ™‚è‡ªå‹•å˜—è©¦

### é€Ÿç‡é™åˆ¶

- ç™¼ä½ˆè²¼æ–‡ï¼š250 ç¯‡/24 å°æ™‚
- å›è¦†è²¼æ–‡ï¼š1,000 æ¢/24 å°æ™‚
- æœå°‹æŸ¥è©¢ï¼š2,200 æ¬¡/24 å°æ™‚ï¼ˆéœ€è¦ç‰¹æ®Šæ¬Šé™ï¼‰

## Mock æ¨¡å¼ï¼ˆæ¸¬è©¦é–‹ç™¼ç”¨ï¼‰

Mock æ¨¡å¼å…è¨±åœ¨**æ²’æœ‰çœŸå¯¦ API Token** çš„æƒ…æ³ä¸‹æ¸¬è©¦æ•´å€‹ç³»çµ±ï¼š

```bash
# è§€å¯Ÿæ¨¡å¼ + Mock
anima observe --mock --cycles 3

# æˆ–é€šéç’°å¢ƒè®Šæ•¸å•Ÿç”¨
USE_MOCK_THREADS=true anima cycle
```

**åŠŸèƒ½åŒ…å«**ï¼š
- é è¨­æ¨¡æ“¬è²¼æ–‡è³‡æ–™åº«ï¼ˆå„ç¨®è©±é¡Œï¼‰
- å®Œæ•´æ±ºç­–å¼•æ“æ¸¬è©¦
- å›æ‡‰ç”Ÿæˆèˆ‡ Persona ä¸€è‡´æ€§é©—è­‰
- è¨˜æ†¶ç³»çµ±æ¸¬è©¦

**âš ï¸ é‡è¦**ï¼šMock æ¨¡å¼ä½¿ç”¨ç¨ç«‹çš„æ¸¬è©¦è¨˜æ†¶åº«ï¼ˆ`anima_{agent}_test`ï¼‰ï¼Œä¸æœƒæ±¡æŸ“æ­£å¼è¨˜æ†¶ã€‚

**é©ç”¨å ´æ™¯**ï¼š
- æœ¬åœ°é–‹ç™¼å’Œèª¿è©¦
- CI/CD è‡ªå‹•åŒ–æ¸¬è©¦
- æ²’æœ‰ API æ¬Šé™æ™‚çš„å¿«é€ŸåŸå‹

## æ—¥èªŒèˆ‡å ±è¡¨

### è³‡æ–™å„²å­˜

| æ¨¡å¼ | è³‡æ–™ç›®éŒ„ | èªªæ˜ |
|-----|---------|------|
| è§€å¯Ÿæ¨¡å¼ | `data/simulations/` | æ¨¡æ“¬é‹è¡Œè¨˜éŒ„ |
| çœŸå¯¦æ¨¡å¼ | `data/real_logs/` | å¯¦éš›ç™¼æ–‡è¨˜éŒ„ |
| å ±è¡¨è¼¸å‡º | `data/reports/` | ä¸€é å ±è¡¨ |

### å ±è¡¨å…§å®¹

ä¸€é å ±è¡¨åŒ…å«ï¼š
- **Persona æ‘˜è¦**ï¼šè§’è‰²åŸºæœ¬è³‡è¨Š
- **è¨˜æ†¶åº«æ¦‚æ³**ï¼šè¨˜æ†¶çµ±è¨ˆ
- **æ±ºç­–èˆ‡äº’å‹•**ï¼šäº’å‹•ç‡ã€skip ç†ç”±åˆ†æ
- **äº’å‹•å¥åº·åº¦**ï¼šç™¼é€æˆåŠŸ/å¤±æ•—çµ±è¨ˆ
- **å“è³ªæ¨™è¨»**ï¼šAdherence åˆ†æ•¸èˆ‡æ¨™è¨»åˆ†å¸ƒ
- **å•é¡Œè¨ºæ–·**ï¼šä½åˆ†æ¡ˆä¾‹èˆ‡è©•åˆ†åŸå› 
- **å¯æ“ä½œå»ºè­°**ï¼šè‡ªå‹•ç”Ÿæˆçš„æ”¹é€²å»ºè­°

## è‡ªè¨‚äººæ ¼

ç·¨è¼¯ `personas/default.json` æˆ–å»ºç«‹æ–°çš„äººæ ¼æª”æ¡ˆï¼š

```json
{
  "identity": {
    "name": "ä½ çš„è§’è‰²å",
    "age": 25,
    "occupation": "è·æ¥­",
    "background": "èƒŒæ™¯æ•…äº‹..."
  },
  "personality": {
    "traits": ["å¥½å¥‡", "å¹½é»˜", "æ€è€ƒå‹"],
    "values": ["çœŸå¯¦", "å‰µæ„"],
    "communication_style": "è¼•é¬†è‡ªç„¶"
  },
  ...
}
```

è©³ç´°çš„ schema è«‹åƒè€ƒ `src/agent/persona.py`ã€‚

## è¨˜æ†¶èˆ‡èº«ä»½è¨­è¨ˆï¼ˆé‡é»ï¼‰

- äº’å‹•æœƒæ‹†æˆå…©ç­†ï¼š`participant_*`ï¼ˆå°è©±è€…å…§å®¹ï¼Œuser scopeï¼‰èˆ‡ `agent_id`ï¼ˆå°å…‰å›è¦†ï¼Œagent scopeï¼‰ï¼Œä¸¦è¤‡å¯«ä¸€ä»½æ‘˜è¦åˆ° agent scopeï¼Œç¢ºä¿åæ€/çµ±è¨ˆå¯è¦‹å°è©±è€…è³‡è¨Šã€‚
- `search/get_recent/stats` æœƒåˆä½µ agent/user è¨˜æ†¶ï¼›MCP èº«ä»½ç”±ã€Œæˆ‘æ˜¯/æˆ‘å«ã€æˆ– `anima_set_user` æ±ºå®šã€‚

## ä¸»å‹•åˆ†äº«ç´ ææ± ï¼ˆå¿«é€Ÿå †æ–™ï¼‰

- å…§å»ºè¼•é‡æŠ“å–è…³æœ¬ï¼š`python -m src.utils.harvest_ideas --limit 8`
  - é è¨­ä¾†æºï¼šOpenAI Blogã€Hugging Face Blogã€Papers with Codeã€Hacker News AIï¼ˆå®˜æ–¹/RSSï¼Œç„¡ Anthropic å®˜æ–¹ RSSï¼‰
  - æœƒç”¨ OpenAI å°‡ç´ æè½‰æˆå£èªåŒ–ä¸­æ–‡çŸ­ç¨¿ï¼Œè¼¸å‡º Markdown + `data/ideas/index.jsonl`ï¼ˆå« pending/posted/expired ç‹€æ…‹èˆ‡ Threads è²¼æ–‡ IDï¼‰
  - éœ€è¦è¨­å®š `OPENAI_API_KEY`ï¼Œå¯åœ¨ Zeabur çš„ `/app/data` volume ä¸­æŒä¹…åŒ–è¼¸å‡º
  - å¯è‡ªè¨‚ feedï¼š`--feeds https://example.com/rss ...`

## æ’ç¨‹ï¼ˆå·²å…§å»ºï¼‰
- äº’å‹•å¾ªç’°ï¼šé è¨­æ¯ 4 å°æ™‚
- ç´ ææŠ“å–ï¼šæ¯ 4 å°æ™‚
- ä¸»å‹•ç™¼æ–‡ï¼šæ¯æ—¥ 10:00 å¾ pending ideas è‡ªå‹•ç™¼ä¸€å‰‡ï¼ˆç™¼ä½ˆå‰æœƒåšé‡è¤‡æª¢æŸ¥ï¼Œç™¼å¾Œæ¨™è¨˜ postedï¼‰
- ç´ æéæœŸï¼šæ¯æ—¥ 03:00 å°‡è¶…é 7 å¤©çš„ pending æ¨™è¨˜ expired
- åæ€ï¼šæ¯æ—¥ 23:00

## æˆæ¬Š

MIT License

## è‡´è¬

- [Mem0](https://github.com/mem0ai/mem0) - è¨˜æ†¶ç³»çµ±
- [TinyTroupe](https://github.com/microsoft/TinyTroupe) - äººæ ¼æ¡†æ¶æ¦‚å¿µ
- [Generative Agents](https://github.com/joonspk-research/generative_agents) - åæ€æ©Ÿåˆ¶æ¦‚å¿µ
